<?php
function initTemplateData(){

$tempxml = "<?xml version='1.0' encoding='UTF-8'?>
<TEMPLATES>
	<TEMPLATE>
		<tempname>Local Business</tempname>
		<categories>
			<category>
				<catname>Arts/Entertainment</catname>
				<subcategories>
					<subcategory>Comedy Clubs</subcategory>
					<subcategory>Cultural Institutions</subcategory>
					<subcategory>Dance</subcategory>
					<subcategory>Galleries</subcategory>
					<subcategory>Movie Theaters</subcategory>
					<subcategory>Museums</subcategory>
					<subcategory>Theaters</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Health/Beauty/Fitness</catname>
				<subcategories>
					<subcategory>Alternative Medicine</subcategory>
					<subcategory>Hair/Beauty</subcategory>
					<subcategory>Health Clubs/Gyms</subcategory>
					<subcategory>Medical Services</subcategory>
					<subcategory>Optician</subcategory>
					<subcategory>Spas</subcategory>
					<subcategory>Sports/Hobbies</subcategory>
					<subcategory>Yoga/Movement</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Home/Family/Pets</catname>
				<subcategories>
					<subcategory>Accessories</subcategory>
					<subcategory>Antiques</subcategory>
					<subcategory>Bed/Bath/Kitchen</subcategory>
					<subcategory>Community</subcategory>
					<subcategory>Furniture</subcategory>
					<subcategory>Kids</subcategory>
					<subcategory>Personal Services</subcategory>
					<subcategory>Pets</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Lifestyle/Leisure</catname>
				<subcategories>
					<subcategory>Bars/Clubs</subcategory>
					<subcategory>Education/Workshops</subcategory>
					<subcategory>Escort Services</subcategory>
					<subcategory>Hobby Classes</subcategory>
					<subcategory>Music Ventures</subcategory>
					<subcategory>Online Entertainment</subcategory>
					<subcategory>Social/Dating Services</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Photo/Digital</catname>
				<subcategories>
					<subcategory>Camera Stores</subcategory>
					<subcategory>Electronics</subcategory>
					<subcategory>Equip. Rentals/Repairs</subcategory>
					<subcategory>Graphic Services</subcategory>
					<subcategory>Photo Image Banks</subcategory>
					<subcategory>Photo Lab</subcategory>
					<subcategory>Photo Supplies</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Restaurants</catname>
				<subcategories>
					<subcategory>American New/Old</subcategory>
					<subcategory>Asian</subcategory>
					<subcategory>Cafes/Coffee Shops</subcategory>
					<subcategory>Delis/Gourmet/Delivery</subcategory>
					<subcategory>French</subcategory>
					<subcategory>Italian</subcategory>
					<subcategory>Latin Am./Spanish</subcategory>
					<subcategory>Seafood</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Services</catname>
				<subcategories>
					<subcategory>Accounting/Legal</subcategory>
					<subcategory>Banking</subcategory>
					<subcategory>Communications</subcategory>
					<subcategory>Courier/Shipping</subcategory>
					<subcategory>Event Spaces</subcategory>
					<subcategory>Office</subcategory>
					<subcategory>Real Estate</subcategory>
					<subcategory>Technology/Graphics</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Shopping</catname>
				<subcategories>
					<subcategory>Art/Framing/Posters</subcategory>
					<subcategory>Books/Music/Video</subcategory>
					<subcategory>Children/Toys</subcategory>
					<subcategory>Fashion</subcategory>
					<subcategory>Flowers</subcategory>
					<subcategory>Gift Shops</subcategory>
					<subcategory>Gourmet Food/Wine</subcategory>
					<subcategory>Other</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Visitor's Guide</catname>
				<subcategories>
					<subcategory>Attractions</subcategory>
					<subcategory>Emergencies</subcategory>
					<subcategory>Hotels</subcategory>
					<subcategory>Money</subcategory>
					<subcategory>Transportation</subcategory>
					<subcategory>Travel Agencies</subcategory>
					<subcategory>Worship</subcategory>
				</subcategories>
			</category>
		</categories>
	</TEMPLATE>
	<TEMPLATE>
		<tempname>Theme Park</tempname>
		<categories>
			<category>
				<catname>Attractions</catname>
				<subcategories>
					<subcategory>Rollercoasters</subcategory>
					<subcategory>Kiddie Rides</subcategory>
					<subcategory>Other Rides</subcategory>
					<subcategory>Shows</subcategory>
					<subcategory>Animals</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Amenities</catname>
				<subcategories>
					<subcategory>Restaurants</subcategory>
					<subcategory>Snacks</subcategory>
					<subcategory>Restrooms</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Services</catname>
				<subcategories>
					<subcategory>Parking</subcategory>
					<subcategory>Visitor Services</subcategory>
					<subcategory>Administration</subcategory>
				</subcategories>
			</category>
		</categories>
	</TEMPLATE>
	<TEMPLATE>
		<tempname>Zoo</tempname>
		<categories>
			<category>
				<catname>Animals</catname>
				<subcategories>
					<subcategory>Large Mammals</subcategory>
					<subcategory>Small Mammals</subcategory>
					<subcategory>Primates</subcategory>
					<subcategory>Birds</subcategory>
					<subcategory>Reptiles</subcategory>
					<subcategory>Amphibians</subcategory>
					<subcategory>Children's Area</subcategory>
					<subcategory>Petting Zoo/Animals</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Amenities</catname>
				<subcategories>
					<subcategory>Restaurants</subcategory>
					<subcategory>Snacks</subcategory>
					<subcategory>Restrooms</subcategory>
				</subcategories>
			</category>
			<category>
				<catname>Services</catname>
				<subcategories>
					<subcategory>Parking</subcategory>
					<subcategory>Visitor Services</subcategory>
					<subcategory>Administration</subcategory>
				</subcategories>
			</category>
		</categories>
	</TEMPLATE>
</TEMPLATES>";

global $wpdb;

$xml = simplexml_load_string($tempxml);

$tempid = 1;
$catid = 1;
console_log("beginning parse: ");
foreach($xml->TEMPLATE as $template){
	$table_name = $wpdb->prefix . 'acmap_templates';
	$tempname = $template->tempname;
		console_log("currtempname: ".$tempname);
	$wpdb->query( $wpdb->prepare( 
		"
			INSERT INTO $table_name
			( templateid, name )
			VALUES ( %d, %s )
		", 
	    $tempid, 
		$tempname
	) );

	
	foreach($template->categories->category as $categories){
		$table_name = $wpdb->prefix . 'acmap_categories';
		$catname = $categories->catname;
			console_log("currcatname: ".$catname);
		$wpdb->query( $wpdb->prepare( 
			"
				INSERT INTO $table_name
				( categoryid, parentid,templateid,name )
				VALUES ( %d, %d,%d,%s )
			", 
		        $catid, 
				-1,
				$tempid,
				$catname
				
		) );
		$holdid = $catid;
		$catid++;	
		foreach($categories->subcategories->subcategory as $subcategories){
			console_log("currsubcatname: ".$subcategories);
			$wpdb->query( $wpdb->prepare( 
				"
					INSERT INTO $table_name
					( categoryid, parentid,templateid,name )
					VALUES ( %d, %d,%d,%s )
				", 
			        $catid, 
					$holdid,
					$tempid,
					$subcategories
			) );
		$catid++;	
		}
			
	}
	$tempid++;
	
}

}

?>